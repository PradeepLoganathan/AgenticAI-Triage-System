# Global workflow timeout configuration for SDK 3.4.6
akka.javasdk.workflow.step-timeout = 180s
akka.javasdk.workflow.ask-timeout = 180s  

akka.javasdk {
  agent {
    # Model provider and defaults for local dev
    model-provider = openai
    openai {
      model-name = "gpt-4o-mini"
      api-key = ${?OPENAI_API_KEY}
      # temperature = 0.3
      # max-tokens = 2000
    }
  }

  # Dev mode configuration
  dev-mode {
    http-port = 9100
    service-name = "triage-service"  # Service name for discovery
  }
}

# Verbose logging configuration
akka {
  loglevel = "DEBUG"
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  logging-filter = "akka.event.slf4j.Slf4jLoggingFilter"
  
  # Additional timeout settings for workflows  
  ask-timeout = 180s
  
  # Workflow timeout configuration - try different keys
  workflow {
    ask-timeout = 180s
    step-timeout = 180s 
    timeout = 180s
  }
  
  # Alternative timeout configurations  
  ask-timeout = 180s
  
  # Try kalix-specific configuration
  kalix {
    workflow {
      ask-timeout = 180s
      step-timeout = 180s
      timeout = 180s
    }
  }
  
  actor {
    debug {
      receive = on
      autoreceive = on
      lifecycle = on
    }
  }
  
  # HTTP timeout settings
  http {
    server {
      request-timeout = 180s
      idle-timeout = 200s
    }
  }
}

# Enable detailed HTTP and agent logging
logging.level {
  akka.javasdk = DEBUG
  akka.runtime = DEBUG  
  com.example.sample = DEBUG
  akka.http = DEBUG
  akka.stream = INFO
  # OpenAI HTTP client debugging
  akka.http.client = DEBUG
  akka.http.server = DEBUG
  # Workflow engine debugging
  akka.runtime.workflow = DEBUG
  # Agent execution debugging
  akka.javasdk.agent = DEBUG
  root = INFO
}

# MCP HTTP JSON-RPC bridge endpoint
# Default points to in-app mock server at /mcp. Override with env var MCP_HTTP_URL or system property MCP_HTTP_URL.
mcp.http.url = "http://localhost:9100/mcp"
