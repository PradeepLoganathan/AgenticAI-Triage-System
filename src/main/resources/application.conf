# ============================================
# Akka Java SDK Configuration
# ============================================

akka.javasdk {
  # Workflow configuration
  workflow {
    step-timeout = 180s
    ask-timeout = 180s
  }

  # Agent configuration
  agent {
    model-provider = openai
    
    openai {
      model-name = "gpt-4o-mini"
      api-key = ${?OPENAI_API_KEY}
    }

    # Guardrails for input/output validation
    guardrails {
      pii-detector {
        class = "com.pradeepl.triage.guardrails.PiiGuardrail"
        agents = ["*"]  # Enable for all agents
        category = PII
        report-only = false
        use-for = [model-request, model-response]
      }

      prompt-injection-detector {
        class = "com.pradeepl.triage.guardrails.PromptInjectionGuardrail"
        agents = ["*"]  # Enable for all agents
        category = PROMPT_INJECTION
        report-only = false
        use-for = [model-request]
      }
    }

    # Guardrails configuration
    guardrails = [
      {
        class = "com.pradeepl.triage.guardrails.PiiGuardrail"
        category = PII
        report-only = false
        use-for = [model-request, model-response]
        agents = ["*"]
      },
      {
        class = "com.pradeepl.triage.guardrails.PromptInjectionGuardrail"
        category = PROMPT_INJECTION
        report-only = false
        use-for = [model-request]
        agents = ["*"]
      },
      {
        class = "com.pradeepl.triage.guardrails.ProfanityGuardrail"
        category = PROFANITY
        report-only = false
        use-for = [model-request, model-response]
        agents = ["*"]
      },
      {
        class = "com.pradeepl.triage.guardrails.DataLeakageGuardrail"
        category = DATA_LEAKAGE
        report-only = false
        use-for = [model-response]
        agents = ["*"]
      }
    ]
  }

  # Dev mode configuration
  dev-mode {
    http-port = 9100
    service-name = "triage-service"
  }
}

# ============================================
# Akka Core Configuration
# ============================================

akka {
  loglevel = "INFO"  # Override in environment-specific configs
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  logging-filter = "akka.event.slf4j.Slf4jLoggingFilter"
  
  ask-timeout = 180s
  
  http {
    server {
      request-timeout = 180s
      idle-timeout = 200s
    }
  }
}

# ============================================
# Logging Configuration
# ============================================

logging.level {
  akka.javasdk = INFO
  akka.runtime = INFO
  akka.http = INFO
  akka.stream = INFO
  com.pradeepl.triage = INFO
  root = INFO
}

# ============================================
# MCP Configuration
# ============================================

mcp.http.url = "http://localhost:9100/mcp"
