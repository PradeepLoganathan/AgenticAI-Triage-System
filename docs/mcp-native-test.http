### Test Evidence Tools MCP Endpoint

### 1. Test fetch_logs tool
POST http://localhost:9100/mcp
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "id": "1",
  "method": "call_tool",
  "params": {
    "name": "fetch_logs",
    "arguments": {
      "service": "payment-service",
      "lines": 100
    }
  }
}

### 2. Test query_metrics tool
POST http://localhost:9100/mcp
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "id": "2",
  "method": "call_tool",
  "params": {
    "name": "query_metrics",
    "arguments": {
      "expr": "payment error_rate",
      "range": "1h"
    }
  }
}

### 3. Test correlate_evidence tool
POST http://localhost:9100/mcp
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "id": "3",
  "method": "call_tool",
  "params": {
    "name": "correlate_evidence",
    "arguments": {
      "logFindings": "High rate of HTTP 503 errors",
      "metricFindings": "CPU spike to 95% at 14:30 UTC"
    }
  }
}

### 4. Test MCP resource - payment service runbook
# Note: Resources use a different MCP method
POST http://localhost:9100/mcp
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "id": "4",
  "method": "resources/read",
  "params": {
    "uri": "kb://runbooks/payment-service"
  }
}

### 5. Test invalid tool (error handling)
POST http://localhost:9100/mcp
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "id": "5",
  "method": "call_tool",
  "params": {
    "name": "invalid_tool_name",
    "arguments": {}
  }
}
